var module;module=angular.module("angularBootstrapNavTree",[]),module.directive("abnTree",function(a){return{restrict:"E",template:'<ul class="nav nav-list nav-pills nav-stacked abn-tree"><li ng-repeat="row in tree_rows | filter:{visible:true} track by row.branch.uid" ng-animate="\'abn-tree-animate\'" ng-class="\'level-\' + {{ row.level }} + (row.branch.selected ? \' active\':\'\')" class="abn-tree-row"><a ng-click="user_clicks_branch(row.branch)"><i ng-class="row.tree_icon" ng-click="row.branch.expanded = !row.branch.expanded" class="indented tree-icon"> </i><span class="indented tree-label">{{ row.label }}</span></a></li></ul>',scope:{treeData:"=",onSelect:"&",initialSelection:"="},link:function(b,c,d){var e,f,g,h,i;if(null==d.iconExpand&&(d.iconExpand="icon-plus"),null==d.iconCollapse&&(d.iconCollapse="icon-minus"),null==d.iconLeaf&&(d.iconLeaf="icon-chevron-right"),null==d.expandLevel&&(d.expandLevel="3"),e=parseInt(d.expandLevel,10),b.header=d.header,!b.treeData)return alert("no treeData defined for the tree!"),void 0;if(null==b.treeData.length){if(null==b.treeData.label)return alert("treeData should be an array of root branches"),void 0;b.treeData=[b.treeData]}return f=function(a){var c,d,e,f,g,h;for(c=function(b,d){var e,f,g,h,i;if(a(b,d),null!=b.children){for(h=b.children,i=[],f=0,g=h.length;g>f;f++)e=h[f],i.push(c(e,d+1));return i}},g=b.treeData,h=[],e=0,f=g.length;f>e;e++)d=g[e],h.push(c(d,1));return h},f(function(a,b){return a.level=b,a.expanded=a.level<e}),i=null,h=function(c){if(c!==i){if(null!=i&&(i.selected=!1),c.selected=!0,i=c,null!=c.onSelect)return a(function(){return c.onSelect(c)});if(null!=b.onSelect)return a(function(){return b.onSelect({branch:c})})}},b.user_clicks_branch=function(a){return a!==i?h(a):void 0},b.tree_rows=[],g=function(){var a,c,e,g,h,i;for(b.tree_rows=[],f(function(a){return a.children?a.children.length>0?a.children=a.children.map(function(a){return"string"==typeof a?{label:a,children:[]}:a}):void 0:a.children=[]}),f(function(a){return a.uid?void 0:a.uid=""+Math.random()}),a=function(c,e,f){var g,h,i,j,k,l,m;if(null==e.expanded&&(e.expanded=!1),i=e.children&&0!==e.children.length?e.expanded?d.iconCollapse:d.iconExpand:d.iconLeaf,b.tree_rows.push({level:c,branch:e,label:e.label,tree_icon:i,visible:f}),null!=e.children){for(l=e.children,m=[],j=0,k=l.length;k>j;j++)g=l[j],h=f&&e.expanded,m.push(a(c+1,g,h));return m}},h=b.treeData,i=[],e=0,g=h.length;g>e;e++)c=h[e],i.push(a(1,c,!0));return i},null!=d.initialSelection&&f(function(a){return a.label===d.initialSelection?h(a):void 0}),b.$watch("treeData",g,!0)}}});